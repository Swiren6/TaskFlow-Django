{% extends 'base.html' %}

{% block title %}{{ title }} - TaskFlow{% endblock %}

{% block content %}
<style>
    .form-page {
        max-width: 600px;
        margin: 0 auto;
    }
    
    .form-help {
        color: #6c757d;
        font-size: 0.85rem;
        margin-top: 6px;
    }
    
    .form-buttons {
        display: flex;
        gap: 12px;
        margin-top: 32px;
        padding-top: 24px;
        border-top: 1px solid #e9ecef;
    }
    
    .required {
        color: #dc3545;
    }
    
    /* INPUTS VISIBLES */
    .form-input, .form-textarea, .form-select {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #dee2e6;
        border-radius: 6px;
        font-size: 15px;
        transition: all 0.2s;
        background: white;
        color: #212529;
        font-family: 'DM Sans', sans-serif;
    }
    
    .form-textarea {
        min-height: 100px;
        resize: vertical;
    }
    
    .form-input:focus, .form-textarea:focus, .form-select:focus {
        outline: none;
        border-color: #4a90e2;
        background: white;
        box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        color: #212529;
    }
    
    .form-input::placeholder, .form-textarea::placeholder {
        color: #6c757d;
        opacity: 0.7;
    }
    
    .form-error {
        color: #dc3545;
        font-size: 13px;
        margin-top: 6px;
    }
    
    /* Correction autofill */
    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    textarea:-webkit-autofill,
    textarea:-webkit-autofill:hover,
    textarea:-webkit-autofill:focus,
    select:-webkit-autofill,
    select:-webkit-autofill:hover,
    select:-webkit-autofill:focus {
        -webkit-text-fill-color: #212529 !important;
        -webkit-box-shadow: 0 0 0px 1000px white inset !important;
    }
</style>

<div class="page-header">
    <h1 class="page-title">{{ title }}</h1>
    <p class="page-subtitle">{% if task %}Update the task details{% else %}Fill in the details for your new task{% endif %}</p>
</div>

<div class="page-content">
    <div class="card form-page">
        <form method="post" novalidate>
            {% csrf_token %}
            
            <div class="form-group">
                <label for="id_title" class="form-label">Task Title <span class="required">*</span></label>
                <input type="text" name="title" id="id_title" class="form-input" 
                       placeholder="Enter task title" value="{{ form.title.value|default:'' }}" required
                       style="color: #212529; background: white; border: 2px solid #dee2e6;">
                {% if form.title.errors %}
                <p class="form-error">{{ form.title.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="id_description" class="form-label">Description</label>
                <textarea name="description" id="id_description" class="form-textarea" 
                          placeholder="Add task description (optional)" rows="4"
                          style="color: #212529; background: white; border: 2px solid #dee2e6;">{{ form.description.value|default:'' }}</textarea>
                {% if form.description.errors %}
                <p class="form-error">{{ form.description.errors.0 }}</p>
                {% endif %}
                <p class="form-help">Optional - add more details about the task</p>
            </div>
            
            <div class="grid-2">
                <div class="form-group">
                    <label for="id_priority" class="form-label">Priority</label>
                    <select name="priority" id="id_priority" class="form-select"
                            style="color: #212529; background: white; border: 2px solid #dee2e6;">
                        {% for value, label in form.fields.priority.choices %}
                        <option value="{{ value }}" {% if form.priority.value == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                    {% if form.priority.errors %}
                    <p class="form-error">{{ form.priority.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="id_due_date" class="form-label">Due Date</label>
                    <input type="date" name="due_date" id="id_due_date" class="form-input" 
                           value="{{ form.due_date.value|date:'Y-m-d'|default:'' }}"
                           style="color: #212529; background: white; border: 2px solid #dee2e6;">
                    {% if form.due_date.errors %}
                    <p class="form-error">{{ form.due_date.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-buttons">
                <button type="submit" class="btn btn-primary">{{ button_text }}</button>
                <a href="{% url 'tasks:task_list' %}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}